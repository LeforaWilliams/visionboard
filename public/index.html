<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="/css/style.css">
    <title>Visionboard</title>
</head>
<body>

    <div class="imageboard-wrap" v-if='images.length > 0' >
        <h1>Visionboard</h1>
        <!-- FOR IMAGE UPLOAD -->
        <form class="image-upload-form">
            <input v-model ='form.title' type="text" name="title" placeholder="Title" value="">

            <input v-model ='form.description' type="text" name="description" value="" placeholder="Description">

            <input v-model ='form.username' type="text" name="username" value="" placeholder="Username">

            <input type="file" accept='image/*'>
            <button
            v-on:click='uploadFile'
            type="button"
            name="upload-button">Upload</button>

        </form>
        <div class="flex-container" :class='{blur: isBlurred}' >
            <div v-for='image in images'class="img-p-unit">
            <a :href="'#' + image.id">
                <img :src="image.url" alt="Selected image from imageboard" v-on:click='blur'>
             </a>
                <p>{{image.title}}</p>
            </div>
        </div>

        <modal :id='show'
        v-if="show"
        v-on:close='hide'>
        </modal>

        <button v-if='images[images.length-1].id !=lastDataId' @click='showMore' type="button" name="button">Show more</button>
    </div>

<script id='modal-template' type="text/template">

        <div id='modal-outer'>
            <div >
        	<h1>{{image.title}}</h1>
            <p  v-on:click='hideModal'> c l o s e </p>
            <img  :src='image.url'>
            <p>{{image.description}}</p>
            <p>Posted on: {{image.created_at}} by {{image.username}} </p>
        <p v-on:click='emitPrevious'>Previous Image</p>

            <comments :id='id'></comments>
            </div>
        </div>


</script>

<script id='comments-template' type="text/template">
    <div>
        <section id='comment-section-wrap'>
            <h2>Comments</h2>
            <!-- <form> -->
                <!-- <input  v-model='form.comment' name='comment' placeholder="Comment"> -->
                <textarea v-model='form.comment' name="text" cols="35" rows="4"></textarea>
                <input v-model='form.username' name='username' placeholder="Username">
                <button @click='saveComment'>Sumbit</button>
            <!-- </form> -->
                <section id='comment-display' v-for='comment in comments'>
                    	<p>{{comment.comment}}</p>
                        <p>{{comment.username}}</p>

                </section>
        </section>
    </div>
</script>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script type="text/javascript" src='js/script.js'>

    </script>
</body>
</html>
